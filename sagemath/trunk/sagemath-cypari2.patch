From da380b320ecd1821dfc2d981c87fe20c2b53c606 Mon Sep 17 00:00:00 2001
From: Jeroen Demeyer <jdemeyer@cage.ugent.be>
Date: Tue, 10 Jul 2018 15:47:12 +0200
Subject: Upgrade cypari2

---
 build/pkgs/cypari/checksums.ini                 | 6 +++---
 build/pkgs/cypari/package-version.txt           | 2 +-
 src/sage/rings/number_field/number_field_rel.py | 7 +++----
 3 files changed, 7 insertions(+), 8 deletions(-)

diff --git a/build/pkgs/cypari/checksums.ini b/build/pkgs/cypari/checksums.ini
index 98475cd..56701e9 100644
--- a/build/pkgs/cypari/checksums.ini
+++ b/build/pkgs/cypari/checksums.ini
@@ -1,4 +1,4 @@
 tarball=cypari2-VERSION.tar.gz
-sha1=d27b8a80470514471a59e38f3e7248c677c58abb
-md5=38149046fbdbecc390ce45e28fc10f8a
-cksum=296167081
+sha1=0f5b274e599c6a6fc9038ac3f4fa4ec86f10a258
+md5=81397fc5665239f23bb22838d84e2f5b
+cksum=1009515002
diff --git a/build/pkgs/cypari/package-version.txt b/build/pkgs/cypari/package-version.txt
index 65087b4..26aaba0 100644
--- a/build/pkgs/cypari/package-version.txt
+++ b/build/pkgs/cypari/package-version.txt
@@ -1 +1 @@
-1.1.4
+1.2.0
diff --git a/src/sage/rings/number_field/number_field_rel.py b/src/sage/rings/number_field/number_field_rel.py
index aa585f6..b3f9c9e 100644
--- a/src/sage/rings/number_field/number_field_rel.py
+++ b/src/sage/rings/number_field/number_field_rel.py
@@ -1103,8 +1103,8 @@ class NumberField_relative(NumberField_generic):
         element = self.base_field().coerce(element)
         element = to_abs_base(element)
         # Express element as a polynomial in the absolute generator of self
-        zk, czk = self._pari_nfzk()
-        expr_x = self._pari_base_nf()._nfeltup(element._pari_polynomial(), zk, czk)
+        nfzk = self._pari_nfzk()
+        expr_x = self._pari_base_nf()._nfeltup(element._pari_polynomial(), nfzk)
         # We do NOT call self(...) because this code is called by
         # __init__ before we initialize self.gens(), and self(...)
         # uses self.gens()
@@ -1515,8 +1515,7 @@ class NumberField_relative(NumberField_generic):
             sage: K.<a> = NumberField(x^2 - 2)
             sage: L.<b> = K.extension(x^2 - 3)
             sage: L._pari_nfzk()
-            ([2, -x^3 + 9*x], 1/2)
-
+            [[2, -x^3 + 9*x], 1/2]
         """
         return self._pari_base_nf()._nf_nfzk(self._pari_rnfeq())
 
-- 
cgit v1.0-1-gd88e

