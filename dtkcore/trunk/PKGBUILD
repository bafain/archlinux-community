# $Id$
# Maintainer: Felix Yan <felixonmars@archlinux.org>
# Contributor: Josip Ponjavic <josipponjavic at gmail dot com>
# Contributor: Xu Fasheng <fasheng.xu[AT]gmail.com>

pkgname=dtkcore
pkgver=2.0.9.4
pkgrel=1
epoch=1
pkgdesc='DTK core modules'
arch=('x86_64')
url="https://github.com/linuxdeepin/dtkcore"
license=('GPL3')
depends=('qt5-base' 'gsettings-qt')
makedepends=('qt5-tools' 'git')
source=("$pkgname-$pkgver.tar.gz::https://github.com/linuxdeepin/dtkcore/archive/$pkgver.tar.gz"
        fix-symbol.patch)
sha512sums=('724b1345fccacc0af8f1284d7c3852c82a06ffde0125de0faccf133265c7e2d3fb17d88abae81d805eb95c81a12166e6ad91bc91202b932ad824f9f086b4c4a1'
            '0b3e8e673136b755029e926c7acabb033fea7d89c4b80d85d1c3419faffdcfb6f8ed75214ed9a4226ae2ee7925c797e73e5acbb6f679d6d98879c15965f0b773')

build() {
  cd dtkcore-$pkgver
  patch -p1 -i ../fix-symbol.patch
  echo $VERSION
  qmake-qt5 PREFIX=/usr
  make
}

package() {
  cd dtkcore-$pkgver
  make INSTALL_ROOT="$pkgdir" install
}
